@page
@model SAAS_Projectplanningtool.Pages.Settings.EditModel

@{
    ViewData["Title"] = "Edit";
}

<style>
    .working-time-row {
        border-bottom: 1px solid #e9ecef;
        padding: 10px 0;
    }

        .working-time-row:last-child {
            border-bottom: none;
        }

    .day-checkbox {
        margin-right: 15px;
    }

    .time-input {
        width: 120px;
        margin: 0 5px;
    }

    .working-hours-section {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        padding: 20px;
        margin-top: 15px;
    }

    .day-disabled {
        opacity: 0.5;
        pointer-events: none;
    }

    .quick-presets {
        margin-bottom: 15px;
    }

    .preset-btn {
        margin-right: 10px;
        margin-bottom: 5px;
    }
</style>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h4>@Model.Company.CompanyName</h4>
</div>

<hr />
<form method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="Company.CompanyId" />
    <input type="hidden" asp-for="Company.CompanyName" />
    <input type="hidden" asp-for="Company.SectorId" />
    <input type="hidden" asp-for="Company.LicenseId" />
    <input type="hidden" asp-for="Company.AddressId" />

    <div class="row">
        <div class="col-md-4">
            <h5>Unternehmensinformationen</h5>
            <hr />
            <div class="form-group">
                <label asp-for="Company.SectorId" class="control-label">Industrie Sektor</label>
                <input asp-for="Company.Sector.SectorName" class="form-control" readonly />
                <span asp-validation-for="Company.SectorId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Company.LicenseId" class="control-label">Gebuchtes Lizenzpaket</label>
                <input asp-for="Company.License.LicenseName" class="form-control" readonly />
                <span asp-validation-for="Company.LicenseId" class="text-danger"></span>
            </div>
        </div>

        <div class="col-md-4">
            <h5>Adressinformationen</h5>
            <hr />
            <input type="hidden" asp-for="Address.CompanyId" />
            <input type="hidden" asp-for="Address.AddressId" />

            <div class="form-group">
                <label asp-for="Address.Country" class="control-label">Land</label>
                <input asp-for="Address.Country" class="form-control" />
                <span asp-validation-for="Address.Country" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Address.Region" class="control-label">Region</label>
                <input asp-for="Address.Region" class="form-control" />
                <span asp-validation-for="Address.Region" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Address.PostalCode" class="control-label">Postleitzahl</label>
                <input asp-for="Address.PostalCode" class="form-control" />
                <span asp-validation-for="Address.PostalCode" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Address.City" class="control-label">Stadt</label>
                <input asp-for="Address.City" class="form-control" />
                <span asp-validation-for="Address.City" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Address.Street" class="control-label">Straße</label>
                <input asp-for="Address.Street" class="form-control" />
                <span asp-validation-for="Address.Street" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Address.HouseNumber" class="control-label">Hausnummer</label>
                <input asp-for="Address.HouseNumber" class="form-control" />
                <span asp-validation-for="Address.HouseNumber" class="text-danger"></span>
            </div>
        </div>

        <div class="col-md-4">
            <h5>Arbeitszeit-Konfiguration</h5>
            <hr />

            <!-- Quick Presets -->
            <div class="quick-presets">
                <h6>Schnelleinstellungen:</h6>
                <button type="button" class="btn btn-sm btn-outline-primary preset-btn" onclick="setStandardWorkWeek()">
                    Standard (Mo-Fr 8:00-17:00)
                </button>
                <button type="button" class="btn btn-sm btn-outline-primary preset-btn" onclick="setFlexibleWorkWeek()">
                    Flexibel (Mo-Fr 9:00-18:00)
                </button>
                <button type="button" class="btn btn-sm btn-outline-primary preset-btn" onclick="setPartTimeWeek()">
                    Teilzeit (Mo-Mi 8:00-16:00)
                </button>
            </div>

            <div class="working-hours-section">
                <h6>Arbeitstage & -zeiten</h6>

                <div class="working-time-row" id="monday-row">
                    <div class="form-check day-checkbox">
                        <input class="form-check-input" type="checkbox" asp-for="_defaultWorkingTimeHandler.Monday" id="monday" onchange="toggleDay('monday')">
                        <label class="form-check-label" for="monday">Montag</label>
                    </div>
                    <div class="d-flex align-items-center mt-2" id="monday-times">
                        <input type="time" asp-for="_defaultWorkingTimeHandler.MondayStart" class="form-control time-input" />
                        <span class="mx-2">bis</span>
                        <input type="time" asp-for="_defaultWorkingTimeHandler.MondayEnd" class="form-control time-input" />
                    </div>
                </div>

                <div class="working-time-row" id="tuesday-row">
                    <div class="form-check day-checkbox">
                        <input class="form-check-input" type="checkbox" asp-for="_defaultWorkingTimeHandler.Tuesday" id="tuesday" onchange="toggleDay('tuesday')">
                        <label class="form-check-label" for="tuesday">Dienstag</label>
                    </div>
                    <div class="d-flex align-items-center mt-2" id="tuesday-times">
                        <input type="time" asp-for="_defaultWorkingTimeHandler.TuesdayStart" class="form-control time-input" />
                        <span class="mx-2">bis</span>
                        <input type="time" asp-for="_defaultWorkingTimeHandler.TuesdayEnd" class="form-control time-input" />
                    </div>
                </div>

                <div class="working-time-row" id="wednesday-row">
                    <div class="form-check day-checkbox">
                        <input class="form-check-input" type="checkbox" asp-for="_defaultWorkingTimeHandler.Wednesday" id="wednesday" onchange="toggleDay('wednesday')">
                        <label class="form-check-label" for="wednesday">Mittwoch</label>
                    </div>
                    <div class="d-flex align-items-center mt-2" id="wednesday-times">
                        <input type="time" asp-for="_defaultWorkingTimeHandler.WednesdayStart" class="form-control time-input" />
                        <span class="mx-2">bis</span>
                        <input type="time" asp-for="_defaultWorkingTimeHandler.WednesdayEnd" class="form-control time-input" />
                    </div>
                </div>

                <div class="working-time-row" id="thursday-row">
                    <div class="form-check day-checkbox">
                        <input class="form-check-input" type="checkbox" asp-for="_defaultWorkingTimeHandler.Thursday" id="thursday" onchange="toggleDay('thursday')">
                        <label class="form-check-label" for="thursday">Donnerstag</label>
                    </div>
                    <div class="d-flex align-items-center mt-2" id="thursday-times">
                        <input type="time" asp-for="_defaultWorkingTimeHandler.ThursdayStart" class="form-control time-input" />
                        <span class="mx-2">bis</span>
                        <input type="time" asp-for="_defaultWorkingTimeHandler.ThursdayEnd" class="form-control time-input" />
                    </div>
                </div>

                <div class="working-time-row" id="friday-row">
                    <div class="form-check day-checkbox">
                        <input class="form-check-input" type="checkbox" asp-for="_defaultWorkingTimeHandler.Friday" id="friday" onchange="toggleDay('friday')">
                        <label class="form-check-label" for="friday">Freitag</label>
                    </div>
                    <div class="d-flex align-items-center mt-2" id="friday-times">
                        <input type="time" asp-for="_defaultWorkingTimeHandler.FridayStart" class="form-control time-input" />
                        <span class="mx-2">bis</span>
                        <input type="time" asp-for="_defaultWorkingTimeHandler.FridayEnd" class="form-control time-input" />
                    </div>
                </div>

                <div class="working-time-row" id="saturday-row">
                    <div class="form-check day-checkbox">
                        <input class="form-check-input" type="checkbox" asp-for="_defaultWorkingTimeHandler.Saturday" id="saturday" onchange="toggleDay('saturday')">
                        <label class="form-check-label" for="saturday">Samstag</label>
                    </div>
                    <div class="d-flex align-items-center mt-2" id="saturday-times">
                        <input type="time" asp-for="_defaultWorkingTimeHandler.SaturdayStart" class="form-control time-input" />
                        <span class="mx-2">bis</span>
                        <input type="time" asp-for="_defaultWorkingTimeHandler.SaturdayEnd" class="form-control time-input" />
                    </div>
                </div>

                <div class="working-time-row" id="sunday-row">
                    <div class="form-check day-checkbox">
                        <input class="form-check-input" type="checkbox" asp-for="_defaultWorkingTimeHandler.Sunday" id="sunday" onchange="toggleDay('sunday')">
                        <label class="form-check-label" for="sunday">Sonntag</label>
                    </div>
                    <div class="d-flex align-items-center mt-2" id="sunday-times">
                        <input type="time" asp-for="_defaultWorkingTimeHandler.SundayStart" class="form-control time-input" />
                        <span class="mx-2">bis</span>
                        <input type="time" asp-for="_defaultWorkingTimeHandler.SundayEnd" class="form-control time-input" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-4">
            <div class="form-group">
                <input type="submit" value="Übernehmen" class="btn btn-primary" />
            </div>
        </div>
    </div>
</form>

<script>
    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
        days.forEach(day => toggleDay(day));
    });

    function toggleDay(day) {
        const checkbox = document.getElementById(day);
        const timesDiv = document.getElementById(day + '-times');

        if (checkbox.checked) {
            timesDiv.classList.remove('day-disabled');
        } else {
            timesDiv.classList.add('day-disabled');
        }
    }
</script>